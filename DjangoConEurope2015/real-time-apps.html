<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Effortless real time apps in Django &mdash; Foobacca Event Notes 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Foobacca Event Notes 1.0 documentation" href="../index.html" />
    <link rel="up" title="DjangoCon Europe 2015" href="index.html" />
    <link rel="next" title="True beauty is on the inside, but users are shallow" href="true-beauty.html" />
    <link rel="prev" title="Forms are static - no they aren’t" href="forms-static.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="true-beauty.html" title="True beauty is on the inside, but users are shallow"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="forms-static.html" title="Forms are static - no they aren’t"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Foobacca Event Notes 1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">DjangoCon Europe 2015</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="effortless-real-time-apps-in-django">
<h1>Effortless real time apps in Django<a class="headerlink" href="#effortless-real-time-apps-in-django" title="Permalink to this headline">¶</a></h1>
<p>Aaron Bassett
&#64;aaronbassett
slides - <a class="reference external" href="https://speakerdeck.com/aaronbassett/effortless-real-time-apps-in-django">https://speakerdeck.com/aaronbassett/effortless-real-time-apps-in-django</a></p>
<ul class="simple">
<li>1996 - iframes - can refresh part of web page</li>
<li>ajax - do polling request</li>
<li>long polling - open request, keep open until something to say, then start new request</li>
<li>all are HACKY</li>
<li>2010 - websockets - effortless real time apps</li>
<li>short polling - 100000 users poll every system, 871 byte header -&gt; 83MB per second</li>
<li>websockets - 0.2 MB per second</li>
<li>also save data for mobile users</li>
<li><a class="reference external" href="http://swampdragon.net">http://swampdragon.net</a> python package</li>
<li>uses django, tornado and redis</li>
<li>redis is in-memory key value store, can also write to disk, pubsub built in</li>
<li>tornado - python, non-blocking webserver</li>
<li>django</li>
<li>browser - tornado - redis - swampdragon/django - postgres</li>
<li>build another todo app</li>
</ul>
<div class="highlight-shell"><pre>pip install swampdragon
apt-get install redis  # or brew - but windows not supported, use VM, cloud ...</pre>
</div>
<ul class="simple">
<li>swamp dragon has dragon admin, similar to django-admin.py, createproject command with standard structure</li>
<li>adds settings to settings.py and creates server.py - similar to manage.py, but runs tornado server</li>
<li>in production, do some WSGI thing</li>
<li>Code - swampdragon.models.SelfPublishModel - mixin, when model saved, push object to redis</li>
<li>uses serializers, convert python object to json, so browser can consume it</li>
<li>swampdragon.serializers.model_serializer - then subclass it for your model</li>
<li>can feel similar to django-rest-framework - but not quite interoperable, branch of swampdragon supports DRF serializers</li>
<li>then have routers, analagous to views, swampdragon.route_handler.ModelRouter</li>
<li>methods - get_list, create, delete, get_object ...</li>
<li>use Angular.js for browser (but can use any other js framework, or raw js if you want)</li>
</ul>
<div class="highlight-javascript"><div class="highlight"><pre>   <span class="nx">$dragon</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">&#39;todo-item&#39;</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">channel</span><span class="p">,</span> <span class="p">{</span><span class="nx">todo_list__id</span><span class="o">:</span> <span class="mi">1</span><span class="p">})</span>
   <span class="nx">$dragon</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="s1">&#39;todo-item&#39;</span><span class="p">,</span> <span class="p">...)</span>
   <span class="nx">$dragon</span><span class="p">.</span><span class="nx">onReady</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
       <span class="nx">$dragon</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(...);</span>
       <span class="nx">$dragon</span><span class="p">.</span><span class="nx">getList</span><span class="p">(...);</span>
       <span class="nx">$dragon</span><span class="p">.</span><span class="nx">getSingle</span><span class="p">(...);</span>
   <span class="p">});</span>

   <span class="nx">$dragon</span><span class="p">.</span><span class="nx">onMessageChannel</span><span class="p">(</span>
       <span class="p">...</span>
   <span class="p">);</span>

<span class="nx">code</span> <span class="nx">at</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//github.com/aaronbassett/djangocon-swampdragon</span>
</pre></div>
</div>
<ul class="simple">
<li>more complexity - more things to manage/go wrong</li>
<li>so use PaaS - firebase, pusher, pubnub ...</li>
<li>DaaS (database as a service)</li>
</ul>
<p><a class="reference external" href="http://www.leggetter.co.uk/2013/12/09/choosing-realtime-web-app-tech-stack.html">http://www.leggetter.co.uk/2013/12/09/choosing-realtime-web-app-tech-stack.html</a></p>
<p>Using Pusher instead - rewrite the SelfPublishModel - don&#8217;t need Router then
Can use pusher angular library</p>
<p><a class="reference external" href="https://github.com/aaronbassett/djangocon-pusher">https://github.com/aaronbassett/djangocon-pusher</a></p>
<p>Working on stuff for Glasgow Council
requirement is to see when someone else is trying to edit thing at same time as you
only want to see notifications for single object - so create per-object channels</p>
<p>created django-pusherable package - on pypi and github</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="forms-static.html"
                        title="previous chapter">Forms are static - no they aren&#8217;t</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="true-beauty.html"
                        title="next chapter">True beauty is on the inside, but users are shallow</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/DjangoConEurope2015/real-time-apps.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="true-beauty.html" title="True beauty is on the inside, but users are shallow"
             >next</a> |</li>
        <li class="right" >
          <a href="forms-static.html" title="Forms are static - no they aren’t"
             >previous</a> |</li>
        <li><a href="../index.html">Foobacca Event Notes 1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >DjangoCon Europe 2015</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Hamish Downer.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>